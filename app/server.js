module.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=11)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("typegoose")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("path")},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t){e.exports=require("ejs")},function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),i=n(3),a=n.n(i),c=n(1);var s=function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class d extends c.Typegoose{}s([Object(c.prop)(),l("design:type",String)],d.prototype,"title",void 0),s([Object(c.prop)(),l("design:type",String)],d.prototype,"description",void 0),s([Object(c.prop)(),l("design:type",String)],d.prototype,"content",void 0);const u=(new d).getModelForClass(d,{schemaOptions:{collection:"articles"}});var f=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,c)}s((o=o.apply(e,t||[])).next())})};const p=(e,t)=>f(void 0,void 0,void 0,function*(){const{_id:n}=e.params;if(!n){const e=yield u.find();return void t.status(200).send(e)}const o=yield u.findById(n);t.status(200).send(o)}),m=(e,t)=>f(void 0,void 0,void 0,function*(){const{body:n}=e,o={title:n.title,description:n.description,content:n.content};yield new u(o).save(),t.status(201).send(`New article ${o.title} has been created!`)}),v=(e,t)=>f(void 0,void 0,void 0,function*(){const{body:n}=e;n._id||t.status(500).send("Resource _id is not specified!"),yield u.findOneAndUpdate({_id:n._id},n,{upsert:!1}),t.status(200).send(`Article ${n.title} has been updated!`)}),y=(e,t)=>f(void 0,void 0,void 0,function*(){const{body:n}=e;n._id||t.status(500).send("Resource _id is not specified!"),yield u.findByIdAndDelete(n._id),t.status(200).send(`Article ${n.title} has been deleted!`)});var b=n(5),h=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,c)}s((o=o.apply(e,t||[])).next())})};const g=(e,t)=>h(void 0,void 0,void 0,function*(){const e=(yield b.connection.db.listCollections().toArray()).map(e=>e.name);t.status(200).send(e)});var x=n(4),w=n(0),E=n.n(w);n(7);n(8);n(9);const O=E.a.createElement(E.a.Fragment,null,E.a.createElement(class extends E.a.Component{render(){return E.a.createElement("header",{className:"site-header"},E.a.createElement("h2",null,"Site header!"))}},null),E.a.createElement("div",{className:"container"},E.a.createElement(class extends E.a.Component{render(){return E.a.createElement("nav",{className:"main-menu"},E.a.createElement("ul",{className:"main-menu__list"},[{label:"Home",href:"/"},{label:"Article",href:"/article"},{label:"About",href:"/about"},{label:"Contacts",href:"/contacts"}].map(({label:e,href:t})=>E.a.createElement("li",{key:t,className:"main-menu__item"},E.a.createElement("a",{href:t,className:"main-menu__link"},e)))))}},null),E.a.createElement("div",{className:"row no-gutters"},E.a.createElement("div",{className:"col-8"},E.a.createElement(class extends E.a.Component{render(){return E.a.createElement("div",null,E.a.createElement("h1",null,"Home page"))}},null)),E.a.createElement("div",{className:"col-4"},E.a.createElement(class extends E.a.Component{render(){return E.a.createElement("aside",{className:"site-sidebar"},"Site sidebar")}},null)))),E.a.createElement(class extends E.a.Component{render(){return E.a.createElement("footer",{className:"site-footer"},"Site footer")}},null));var j=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function a(e){try{s(o.next(e))}catch(e){i(e)}}function c(e){try{s(o.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,c)}s((o=o.apply(e,t||[])).next())})};const _=n(6),S=(e,t)=>j(void 0,void 0,void 0,function*(){const e=yield u.find();t.render("index",{App:Object(x.renderToString)(O),ssr:!0,articles:e})}),R=(e,t)=>j(void 0,void 0,void 0,function*(){t.sendFile(_.resolve(process.cwd(),"admin/dist/index.html"))}),N="/",P="/admin-panel",$="/rest/collection",q="/rest/article";b.connect("mongodb://localhost:27017/blog-cms",{useNewUrlParser:!0});const A=n(6),C=r()();var T;C.set("view engine","ejs"),C.engine("ejs",n(10).renderFile),C.set("views","app/views"),C.use(a.a.json()),C.use(r.a.static(A.resolve(process.cwd(),"app/dist"))),C.use(r.a.static(A.resolve(process.cwd(),"admin/dist"))),(T=C).get(N,S),T.get(`${P}*`,R),T.get(`${q}/:_id`,p),T.post(`${q}`,m),T.patch(`${q}`,v),T.delete(`${q}`,y),T.get($,g),C.listen(Object({BROWSER:!0}).PORT||3e3,()=>{console.log(`Server is listening on port ${Object({BROWSER:!0}).PORT||3e3}`)})}]);
//# sourceMappingURL=server.js.map